<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kviz</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/path-to-your-css.css"> <!-- Dodaj putanju do svog CSS fajla -->
</head>
<body>
    <div class="container kviz">
        <div class="text-center mb-4">
            <h1 class="text-primary">Dobrodošli u kviz!</h1>
            <p id="question-count">
                Pitanje <span id="current-question">1</span> od <span id="total-questions"><%= questions.length %></span>
            </p>
        </div>

        <% questions.forEach((question, index) => { %>
            <div class="card question-card <%= index === 0 ? 'active-card' : 'hidden-right' %>" id="card<%= index + 1 %>">
                <div class="card-body">
                    <h3 class="text-center text-secondary">Pitanje <%= index + 1 %>:</h3>
                    <p class="text-center"><%= question.tekstPitanja %></p>
                    <div id="answers<%= index + 1 %>" class="answers text-center mt-3">
                        <% question.answers.forEach(answer => { %>
                            <button 
                                class="btn dugme mt-2 answer-button" 
                                data-correct="<%= answer === question.tacanOdgovor %>"
                                onclick="handleAnswerClick(this, <%= index + 1 %>, '<%= question.tacanOdgovor %>')">
                                <%= answer %>
                            </button>
                        <% }); %>
                    </div>
                    <p id="correct-answer<%= index + 1 %>" class="mt-3 d-none text-center text-success">
                        Tačan odgovor: <strong><%= question.tacanOdgovor %></strong>
                    </p>
                </div>
            </div>
        <% }); %>

        <div class="d-flex justify-content-between mt-4">
            <button id="previous-btn" class="btn dugmeTokomKviza" onclick="previousQuestion()" disabled>Prethodno</button>
            <button id="next-btn" class="btn dugmeTokomKviza" onclick="nextQuestion()">Sledeće</button>
        </div>
    </div>

    <script>
        let currentQuestion = 1;
        const totalQuestions = <%= questions.length %>;

        // Ažuriraj broj pitanja
        document.getElementById('total-questions').textContent = totalQuestions;

        // Funkcija za sledeće pitanje
        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                document.getElementById(card${currentQuestion}).classList.remove('active-card');
                document.getElementById(card${currentQuestion}).classList.add('hidden-left');
                currentQuestion++;
                document.getElementById(card${currentQuestion}).classList.remove('hidden-right');
                document.getElementById(card${currentQuestion}).classList.add('active-card');
            }
            toggleNavButtons();
            updateQuestionCount();
        }

        // Funkcija za prethodno pitanje
        function previousQuestion() {
            if (currentQuestion > 1) {
                document.getElementById(card${currentQuestion}).classList.remove('active-card');
                document.getElementById(card${currentQuestion}).classList.add('hidden-right');
                currentQuestion--;
                document.getElementById(card${currentQuestion}).classList.remove('hidden-left');
                document.getElementById(card${currentQuestion}).classList.add('active-card');
            }
            toggleNavButtons();
            updateQuestionCount();
        }

        // Ažuriraj navigacione dugmiće
        function toggleNavButtons() {
            document.getElementById('previous-btn').disabled = currentQuestion === 1;
            document.getElementById('next-btn').disabled = currentQuestion === totalQuestions;
        }

        // Ažuriraj broj trenutnog pitanja
        function updateQuestionCount() {
            document.getElementById('current-question').textContent = currentQuestion;
        }

        // Funkcija za klik na odgovor
        function handleAnswerClick(button, questionIndex, correctAnswer) {
            const answersDiv = document.getElementById(answers${questionIndex});
            const answerButtons = answersDiv.querySelectorAll('.answer-button');
            answerButtons.forEach(btn => btn.disabled = true);

            if (button.dataset.correct === "true") {
                button.classList.add('btn-success');
            } else {
                button.classList.add('btn-danger');
            }

            const correctAnswerParagraph = document.getElementById(correct-answer${questionIndex});
            correctAnswerParagraph.classList.remove('d-none');
        }
    </script>
</body>
</html>